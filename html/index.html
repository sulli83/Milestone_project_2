<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Analysis of Social Housing Data</title>
    
    <link rel="stylesheet" href="/static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="/static/css/dc.min.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/static/css/style.css" type="text/css" />
    
    
    <script type="text/javascript" src="/static/js/d3.min.js"></script>
    <script type="text/javascript" src="/static/js/crossfilter.min.js"></script>
    <script type="text/javascript" src="/static/js/dc.min.js"></script>
    <script type="text/javascript" src="/static/js/queue.min.js"></script>
    <!--<script type="text/javascript" src="/static/js/graph.js"></script>-->

  
    

</head>



<body>
  <container>
     <section>
     <div id="heading_para">
    <h1>
      Social Housing Construction for quarter 1 - 2018
    </h1>
  
    <h3>
    This project an analysis of data obtainer from the Gov.org website in relation to Social Housing in
    Ireland.
    </h3>
    
    <!--closing of heading div-->
    </div>
    <div class="graph_block">
    <div class = "col-md-4 my-4 pie_graph">
        <h3>Total Number Of Units Per Local Authority</h3>
         <div class="body_text">
        <p>This pie-chart shows possibly a disproportinately small number of social housing units being built in Dublin.
        In light of the increased population density of the area.</p>
        <!--closing body_text-->
        </div>
        <div id="number_of_units_per_LA" class="charts pie_graphic"></div>
        <!--closing pie_graph grid-->
    </div>
    
    <div class="col-md-4 my-4 pie_graph">
        <h3>Total Number Of Units Per Funding Programme</h3>
        <div class="body_text">
        <p>Local Authority direct provision: Local Authorities are directly providing housing to people on the social housing list.
        However, there has been limited delivery of new social housing at scale by Local Authorities in recent years when compared 
        to historic volumes provided in this way.
        
        AHB direct provision: Much of the social housing stock in Ireland is provided by Approved Housing Bodies, regulated
        by the Housing Agency and the Charities Regulator. While the Approved Housing Bodies have been adding to their stock (including through developments on sites provided by NAMA through the NARPs scheme or financed under the CALF and CAS schemes), the overall volumes being added and the scale of the Irish AHB sector is relatively modest compared to the overall need cited above.</p>
        <!--closing body text-->
        </div>
        <div id="number_of_units_per_funding_programme" class="charts pie_graphic"></div>
    <!--closing pie-graph div-->
    </div>
    
   <!--
    <div class = "col-md-4 my-4 pie_graph">
        
        <h3>Developments with over 50 units</h3>
        <div id="pie-chart-2"></div>
    </div>
    -->
    <div class = "col-md-4 my-4 pie_graph">
      <h3>Numbers of Units in Social Housing Developments</h3>
      <div class="body_text">
      <p>The lack of larger scale developments signal an ideological shift from government away from
      large scale social housing development. This suggests an negative opinion of such development due 
      to perceived social issues.</p>
      <!--closing body_text-->
      </div>
      <div id="pie-chart" class="charts pie_graphic"></div>
    </div>
    
    <!--closing of graph_block-->
    </div>
    
    
    
  <div class="row_chart_block"> 
  <div id="AHB_rowChart" class="col-md-4 my-4 charts">
    <h3>Units Per Approved Housing Body</h3> 
    <p>List Bar Chart list the approved housing bodies along with 
    the number of units which they are currently constructing. The number of AHB may indicate a convoluted
    process involved in delivering social homes to house who are in need.</p>

  </div>
  
  <div id="LA_rowChart" class="col-md-4 my-4 charts">
    <h3>Local Authority Row Chart</h3>
    <div class = "body_text">
    <p>Bar Chart displaying the same data as can be seen in the first pie graph.</p>
    <!--close body text div-->
    </div>
  
  <!--clsoing row-chart-->
  </div>
  </section>
  <section>
       <h1>ESB Connections 1972-2015</h1>

    <h2>DC LineChart</h2>

    <div class="esc_connections_block">
        <h3>ESB Connections 1972-2015</h3>
        <h3>Local Authority Connections compared to Private Ownership</h3>
        
        <div class="body_text">
        <p>This graph clearly highlight a lack of adequate response to the need for social housing ESB connections since the 90's.
        The data for social house can be seen fluctuate in tandem with the data for private housing figures.
        More recently the figure for private houses have begun to increases again quite rapidly since the 
        end of the recession which isn't the case social housing units.This would suggest a reluctance inn policy
        or ideological opposition to such developments. ESB connections in both fields can be seen to reduce to a very minimal
        percentage of those in the Private House connections.</p>
        <!--end of body text-->
        </div>
    <div class="graph_block">
        <div id="composite-chart" class="line_charts"></div>
    </div>
    
    <div>
        <h3>ESB Connections 1972-2015</h3>
        <h3>Local Authority, Social and Voluntary again compared with Private Ownership connections</h3>
    <div class="graph_block">
        <div id="composite-chart-1" class="line_charts"></div>
    </div>
    
    <div>
        <h3>Bar Chart</h3>
        <div id="bar-chart"></div>
    </div>
  </div>
  <!--closing esb cons  block-->
  </section>
  <!--
  <div>
      <h3>Completed Row Chart</h3>
      <div id="completed_rowChart">
          
      </div>
  </div>
    -->
    
    <!--
    <div id="chart-here">
      This is where chart should appear
    </div>
    -->
    </container>
    
     <script>
     

queue()
.defer(d3.csv, "/housing_data/soc_housing.csv")
.await(makeSocialGraphs) 
     function makeSocialGraphs(error, housingData) {
            var ndx = crossfilter(housingData);
            
            
          
            /*piechart for Local Authority and units*/
            var LA_dim = ndx.dimension(dc.pluck('LA'));
            var total_number_of_units = LA_dim.group().reduceSum(dc.pluck('Units'));
            dc.pieChart('#number_of_units_per_LA')
                .height(400)
                .radius(300)
                .innerRadius(50)
                .transitionDuration(1500)
                .dimension(LA_dim)
                .group(total_number_of_units);
            
            /*piechart for funding programme information*/
            var funding_programme_dim = ndx.dimension(dc.pluck('Funding Programme'));
            var total_number_of_units_per_funding_programme = funding_programme_dim.group().reduceSum(dc.pluck('Units'));
            dc.pieChart('#number_of_units_per_funding_programme')
                .height(400)
                .radius(300)
                .innerRadius(50)
                .transitionDuration(1500)
                .dimension(funding_programme_dim)
                .group(total_number_of_units_per_funding_programme);
                
           
     
          /*size of developments */      
          var size_dimension = ndx.dimension(function (d) {
            if (d.Units > 100)
                return "Large development (100+ Units)";
            else if (d.Units > 50)
                return "Large/Medium development (100-50 Units)";
            else if (d.Units > 25)
                return "Medium development (50-25 Units)";
            else if (d.Units > 10)
                return "Small development (25-10 Units)";
            else
                return "Very small development (Under 10 Units)";
        });
        
        var devSizeColors = d3.scale.ordinal()
        .domain(["Large development (100+ Units)","Large/Medium development (100-50 Units)","Medium development (50-25 Units)",
        "Small development (25-10 Units)","Very small development (Under 10 Units)"])
        .range(["red", "orange", "blue","green","yellow"]);
        
        var size_group = size_dimension.group();
        dc.pieChart('#pie-chart')
            .height(400)
             .transitionDuration(500)
            .radius(300)
            .innerRadius(50)
            .colors(devSizeColors)
            .dimension(size_dimension)
            .group(size_group);
            
          /*   var size_dimension = ndx.dimension(function (d) {
            if (d.Units > 50)
                return "Large and medium development";
            else
                return "Small development"
        });
        var size_group = size_dimension.group();
        dc.pieChart('#pie-chart-2')
            .height(400)
            .radius(300)
            .dimension(size_dimension)
            .group(size_group);
   */
    
            
        /*barchart for AHB Bar Chart*/ 
        var name_dim = ndx.dimension(dc.pluck('Approved Housing Body'));
        var total_units_per_ahb = name_dim.group().reduceSum(dc.pluck('Units'));
        dc.rowChart("#AHB_rowChart")
            .width(500)
            .height(1000)
            .margins({top: 10, right: 50, bottom: 30, left: 50})
            .dimension(name_dim)
            .group(total_units_per_ahb)
            .transitionDuration(500)
            .x(d3.scale.ordinal())
            /*.xUnits(dc.units.ordinal)*/
            /*.xAxisLabel("Units")*/
            .elasticX(true)
            .xAxis().ticks(10);
         
         
         /*java script for Local Authority Bar Chart information.*/   
        var name_dim = ndx.dimension(dc.pluck('LA'));
        var total_units_per_local_authority = name_dim.group().reduceSum(dc.pluck('Units'));
        dc.rowChart("#LA_rowChart")
            .width(500)
            .height(1000)
            .margins({top: 10, right: 50, bottom: 30, left: 50})
            .dimension(name_dim)
            .group(total_units_per_local_authority)
            .transitionDuration(500)
            .x(d3.scale.ordinal())
            /*.xUnits(dc.units.ordinal)*/
            /*.xAxisLabel("Units")*/
            .elasticX(true)
            .xAxis().ticks(10);
         
            
            
            dc.renderAll();
        }
{
queue()
.defer(d3.json, "/housing_data/esb_connections.json")
.await(makeESBGraphs)
 function makeESBGraphs(error, esb_connectionsData) {
        var ndx = crossfilter(esb_connectionsData);
        
        var parseDate = d3.time.format("%Y").parse;
        esb_connectionsData.forEach(function(d){
            d.date = parseDate(d.date);
        });
        
        var date_dim = ndx.dimension(dc.pluck('date'));
        var minDate = date_dim.bottom(1)[0].date;
        var maxDate = date_dim.top(1)[0].date;
        function units_by_owner(owner) {
            return function(d) {
                if (d.owner === owner) {
                    return +d.units;
                } else {
                    return 0;
                }
            }
        }
        var PrivateUnitsByDate = date_dim.group().reduceSum(units_by_owner('Private'));
        var SocialUnitsByDate = date_dim.group().reduceSum(units_by_owner('Social'));
        
       
        var compositeChart = dc.compositeChart('#composite-chart');
        compositeChart
            .width(990)
            .height(200)
            .dimension(date_dim)
            .x(d3.time.scale().domain([minDate, maxDate]))
            .yAxisLabel("units")
            .xAxisLabel("date")
            .legend(dc.legend().x(80).y(20).itemHeight(13).gap(5))
            .renderHorizontalGridLines(true)
            .compose([
                dc.lineChart(compositeChart)
                    .colors('green')
                    .group(PrivateUnitsByDate, 'Private'),
                dc.lineChart(compositeChart)
                    .colors('red')
                    .group(SocialUnitsByDate, 'Social')
               ])
            .brushOn(false)
            .render();
            
        /*functions and variables for private and social houses*/
        
        
        var date_dim = ndx.dimension(dc.pluck('date'));
        var minDate = date_dim.bottom(1)[0].date;
        var maxDate = date_dim.top(1)[0].date;
        function units_by_name(name) {
            return function(d) {
                if (d.name === name) {
                    return +d.units;
                } else {
                    return 0;
                }
            }
        }
        var LAunitsByDate = date_dim.group().reduceSum(units_by_name('LA'));
        var SocunitsByDate = date_dim.group().reduceSum(units_by_name('Soc'));
        
        var PrivunitsByDate = date_dim.group().reduceSum(units_by_name('Priv'));
        var compositeChart = dc.compositeChart('#composite-chart-1');
        compositeChart
            .width(990)
            .height(200)
            .dimension(date_dim)
            .x(d3.time.scale().domain([minDate, maxDate]))
            .yAxisLabel("units")
            .xAxisLabel("date")
            .legend(dc.legend().x(80).y(20).itemHeight(13).gap(5))
            .renderHorizontalGridLines(true)
            .compose([
                dc.lineChart(compositeChart)
                    .colors('green')
                    .group(LAunitsByDate, 'SocialHousing - Local Authority'),
                dc.lineChart(compositeChart)
                    .colors('red')
                    .group(SocunitsByDate, 'Social Housing - Voluntary & Co-operative Housing'),
                dc.lineChart(compositeChart)
                    .colors('blue')
                    .group(PrivunitsByDate, 'Private Ownership')
            ])
            .brushOn(false)
            .render();
         
         
         /*code for bar chart*/ 
         var name_dim = ndx.dimension(dc.pluck('owner'));

        var unitsByFpDub = name_dim.group().reduceSum(function (d) {
            if (d.owner === 'Private') {
                return +d.units;
            } else {
                return 0;
            }
        });

        var unitsByFpCor = name_dim.group().reduceSum(function (d) {
            if (d.owner === 'Social') {
                return +d.units;
            } else {
                return 0;
            }
        });

        var stackedChart = dc.barChart("#bar-chart");
        stackedChart
            .width(800)
            .height(500)
            .dimension(name_dim)
            .group(unitsByFpDub, "Private")
            .stack(unitsByFpCor, "Social")
            .x(d3.scale.ordinal())
            .xUnits(dc.units.ordinal)
            .legend(dc.legend().x(420).y(0).itemHeight(15).gap(5));

        stackedChart.margins().right = 100;
            
        
   
        
        dc.renderAll();
        }        
        
        }
        
    
        
    </script>
    

    
    
   
</body>
</html>